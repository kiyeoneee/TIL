(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{351:function(e,a){e.exports="data:image/png;base64,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"},371:function(e,a,t){"use strict";t.r(a);var s=t(42),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"hbase-아키텍처"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbase-아키텍처"}},[e._v("#")]),e._v(" HBase 아키텍처")]),e._v(" "),s("h2",{attrs:{id:"목차"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#목차"}},[e._v("#")]),e._v(" 목차")]),e._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"#Write-Ahead-Log-WAL"}},[e._v("Write Ahead Log (WAL)")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#StoreFile-HFile"}},[e._v("StoreFile (HFile)")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%EB%B3%80%EA%B2%BD%EC%82%AC%ED%95%AD-%EB%B3%B5%EA%B5%AC"}},[e._v("변경 사항 복구")])])]),e._v(" "),s("hr"),e._v(" "),s("h2",{attrs:{id:"개요"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#개요"}},[e._v("#")]),e._v(" 개요")]),e._v(" "),s("blockquote",[s("p",[e._v("HBase를 매일 이리저리 사용하면서도 자세히 모르는 것 같아서 현타가 와버렸다.ㅠㅠ\n기억의 파편들에 리서치로 뼈와 살을 붙여 제대로 HBase를 이해해보자")])]),e._v(" "),s("Br",[s("h2",{attrs:{id:"write-ahead-log-wal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#write-ahead-log-wal"}},[e._v("#")]),e._v(" Write Ahead Log (WAL)")]),e._v(" "),s("p",[e._v("리전 서버는 디스크에 파일이 너무 많이 생성되지 않도록 메모리(memstore)에 충분히 보유한다. 메모리에 데이터를 가지므로 서버에 이슈가 생길 경우 소실 가능성이 있다. 이러한 문제를 해결하기 위해 WAL을 사용한다.")]),e._v(" "),s("p",[e._v("HBase는 모든 변경 사항들을 로그에 쓰고, 연산이 성공했을 때만 클라이언트에 성공했음을 반환한다. 서버가 중지되면 WAL을 사용하여 서버가 중지되기 전까지의 상태 "),s("a",{attrs:{href:"#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD-%EB%B3%B5%EA%B5%AC"}},[e._v("변경 사항을 재현")]),e._v("할 수 있다.")]),e._v(" "),s("br"),e._v(" "),s("h2",{attrs:{id:"storefile-hfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storefile-hfile"}},[e._v("#")]),e._v(" StoreFile ("),s("RouterLink",{attrs:{to:"/DB/hbase/HBase_아키텍처.html#http://hbase.apache.org/book.html#hfile"}},[e._v("HFile")]),e._v(")")],1),e._v(" "),s("p",[e._v("실제 저장 파일을 구현하는 클래스로, HBase의 데이터를 효율적으로 저장한다는 단 하나의 명확한 목표를 달성하기 위한 클래스\nhttps://github.com/apache/hbase/blob/6cdc4b1f0574cc424480ec2f2e3129f280fa8472/hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java")]),e._v(" "),s("p",[s("img",{attrs:{src:t(351),alt:"HFile구조"}})]),e._v(" "),s("p",[e._v("위 그림은 HFile의 구조인데 File Info, Trailer 외에는 모두 옵셔널한 블록이다. 하지만 Data 블록는 실질적으로 저장되는 데이터를 담기 때문에 거의 대부분 하나의 데이터 블록은 존재할 것이다.\nData 블록은 key (로우 키 길이, 로우키, 컬럼 패밀리 길이, ...), value 로 이루어져 있다. 키에는 많은 정보가 담겨져 있으므로 불필요하기 긴 이름의 키 설정을 지양해야 한다.")]),e._v(" "),s("br"),e._v(" "),s("h2",{attrs:{id:"변경-사항-복구"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#변경-사항-복구"}},[e._v("#")]),e._v(" 변경 사항 복구")]),e._v(" "),s("p",[e._v("리전이 열리면 'recovered.edits' 디렉터리가 있는지 확인한다. 디렉토리가 존재하면 HBase 변경사항이 저장된 내부의 파일들을 읽어 memstore에 저장한다. 파일들은 일련번호가 포함된 이름순으로 정렬되어 있으므로 순서대로 복구할 수 있다. 이 때 일련번호가 디스크에 저장된 저장 파일(HFile)의 일련번호와 같거나 작으면 이미 모든 내용이 반영된것으로 판단하고 무시한다.\n모든 edit 파일을 체크하면 memstore의 내용들은 디스크(HFile)로 저장하도록 강제 flush를 하고, edit 파일들은 삭제한다.")]),e._v(" "),s("br"),e._v(" "),s("h2",{attrs:{id:"zookeeper와-hbase-wip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper와-hbase-wip"}},[e._v("#")]),e._v(" Zookeeper와 HBase (WIP)")]),e._v(" "),s("p",[e._v("http://hbase.apache.org/book.html#trouble.namenode.hbase.objects")])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);