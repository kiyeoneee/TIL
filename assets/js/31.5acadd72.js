(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{390:function(t,s,a){"use strict";a.r(s);var n=a(42),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_2장-아키텍처-개요"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2장-아키텍처-개요"}},[t._v("#")]),t._v(" 2장. 아키텍처 개요")]),t._v(" "),a("h2",{attrs:{id:"목차"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#목차"}},[t._v("#")]),t._v(" 목차")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"#%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%9A%94"}},[t._v("아키텍처 개요")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98"}},[t._v("계층 구조 아키텍처")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#DIP"}},[t._v("DIP")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#DIP-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD"}},[t._v("DIP 주의사항")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#DIP%EC%99%80-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98"}},[t._v("DIP와 아키텍처")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%98%81%EC%97%AD%EC%9D%98-%EC%A3%BC%EC%9A%94-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C"}},[t._v("도메인 영역의 주요 구성요소")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%EC%97%94%ED%8B%B0%ED%8B%B0%EC%99%80-%EB%B0%B8%EB%A5%98"}},[t._v("엔티티와 밸류")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"아키텍처-개요"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#아키텍처-개요"}},[t._v("#")]),t._v(" 아키텍처 개요")]),t._v(" "),a("h3",{attrs:{id:"아키텍처-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#아키텍처-영역"}},[t._v("#")]),t._v(" 아키텍처 영역")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("표현 영역")]),t._v(" "),a("ul",[a("li",[t._v("UI 영역이라고도 함")]),t._v(" "),a("li",[t._v("사용자의 요청을 받아 응용 영역에 전달")]),t._v(" "),a("li",[t._v("응용 영역의 처리 결과를 사용자에게 보여줌")]),t._v(" "),a("li",[t._v("스프링 MVC 프레임워크가 대표적인 기술")])])]),t._v(" "),a("li",[a("p",[t._v("응용 영역")]),t._v(" "),a("ul",[a("li",[t._v("도메인 영역을 이용해서 사용자에게 제공할 기술을 구현")])])]),t._v(" "),a("li",[a("p",[t._v("도메인 영역")]),t._v(" "),a("ul",[a("li",[t._v("도메인 모델인 도메인의 핵심 로직을 구현")])])]),t._v(" "),a("li",[a("p",[t._v("인프라스트럭처 영역")]),t._v(" "),a("ul",[a("li",[t._v("구현 기술에 대한 것을 다룸")]),t._v(" "),a("li",[t._v("논리적인 개념 표현 보다는 실제 구현을 다룸")]),t._v(" "),a("li",[t._v("도메인, 응용, 표현 영역에서 사용할 기능을 제공")])])])]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"계층-구조-아키텍처"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#계층-구조-아키텍처"}},[t._v("#")]),t._v(" 계층 구조 아키텍처")]),t._v(" "),a("h3",{attrs:{id:"표현-응용-도메인-인프라스트럭쳐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#표현-응용-도메인-인프라스트럭쳐"}},[t._v("#")]),t._v(" 표현 -> 응용 -> 도메인 -> 인프라스트럭쳐")]),t._v(" "),a("p",[t._v("계층 구조 아키텍처는 왼쪽에서 오른쪽의 순서로 계층 구조를 가진다."),a("br"),t._v("\n계층 구조의 특성상 상위 계층에서 하위 계층으로의 의존만 존재하고 하위 계층은 상위 계층에 의존하지 않음"),a("br"),t._v("\n엄격한 계층 구조는 바로 아래의 계층에만 의존을 가져야 하지만 실질적으로 표현, 응용, 도메인은 인프라스트럭쳐 영역에서 상세하게 구현한 기술을 가져다 쓰기 때문에 "),a("strong",[t._v("모든 영역에 인프라스트럭쳐 영역에 의존")]),t._v("이 존재한다. 이로인해 "),a("strong",[t._v("테스트 어려움")]),t._v("과 "),a("strong",[t._v("기능 확장의 어려움")]),t._v("이 존재한다.")]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"dip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dip"}},[t._v("#")]),t._v(" DIP")]),t._v(" "),a("p",[a("strong",[t._v("Dependency Inversion Principle, 의존 역전 원칙")])]),t._v(" "),a("p",[t._v("단일 기능을 제공하는 "),a("strong",[t._v("고수준 모듈")]),t._v("은 여러 하위 기능을 구현한 "),a("strong",[t._v("저수준 모듈")]),t._v("이 필요"),a("br"),t._v("\n그러나 고수준 모듈이 저수준 모듈을 사용하여 기능 구현 시 테스트 어려움과 확장의 어려움이 발생"),a("br"),t._v("\n이를 해결하기 위해 "),a("strong",[t._v("추상화 한 인터페이스를 통해 저수준 모듈이 고수준 모듈을 의존")]),t._v("하도록 함")]),t._v(" "),a("p",[t._v("고수준 모듈의 추상화를 통해 테스트 시에도 대용 객체를 사용하여 테스트가 가능해 짐")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CalculateDiscountServiceTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("expect "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NoCustomerException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("noCustomer_thenExceptionShouldBeThrown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 테스트 목적의 대용 객체")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomerRepository")]),t._v(" stubRepo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomerRepository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stubRepo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"noCustId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("thenReturn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuleDiscounter")]),t._v(" stubRule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cust"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 대용 객체를 주입받아 테스트 진행")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CalculateDiscountService")]),t._v(" calDisSvc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CalculateDiscountService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stubRepo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stubRule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    calDisSvc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateDiscount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someLines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"noCustId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("br"),t._v(" "),a("h2",{attrs:{id:"dip-주의사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dip-주의사항"}},[t._v("#")]),t._v(" DIP 주의사항")]),t._v(" "),a("p",[t._v("DIP를 적용할 떄 "),a("strong",[t._v("하위 기능을 추상화한 인터페이스는 고수준 모듈 관점에서 도출")]),t._v("해야 함")]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"dip와-아키텍처"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dip와-아키텍처"}},[t._v("#")]),t._v(" DIP와 아키텍처")]),t._v(" "),a("p",[t._v("아키텍처에 DIP를 적용하면 인프라스트럭처 영역이 응용/도메인 영역을 의존(상속)"),a("br"),t._v("\n인프라스트럭처 영역의 기술이 바뀌더라도 응용/도메인 영역에 영향을 끼치지 않을 수 있음"),a("br"),t._v("\n(e.g., DB의 종류를 바꾸더라도 Repository 클래스만 추가 해 주면 됨, MySqlRepository -> HBaseRepository)")]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"도메인-영역의-주요-구성요소"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#도메인-영역의-주요-구성요소"}},[t._v("#")]),t._v(" 도메인 영역의 주요 구성요소")]),t._v(" "),a("p",[t._v("도메인 영역의 모델은 도메인의 주요 개념을 표현하며 핵심이 되는 로직을 구현")]),t._v(" "),a("ul",[a("li",[t._v("Entity\n"),a("ul",[a("li",[t._v("고유의 식별자를 갖는 객체")]),t._v(" "),a("li",[t._v("도메인의 고유한 개념을 표현")]),t._v(" "),a("li",[t._v("도메인 모델의 데이터를 포함하며 관련 기능을 제공")])])]),t._v(" "),a("li",[t._v("Value\n"),a("ul",[a("li",[t._v("고유의 식별자가 없음")]),t._v(" "),a("li",[t._v("하나의 도메인 객체의 속성을 표현할 때 사용")])])]),t._v(" "),a("li",[t._v("Aggregate\n"),a("ul",[a("li",[t._v("관련된 Entity와 Value 객체를 개념적으로 하나로 묶은 것")])])]),t._v(" "),a("li",[t._v("Repository\n"),a("ul",[a("li",[t._v("DB와 관련된 기능을 제공")])])]),t._v(" "),a("li",[t._v("Domain Service\n"),a("ul",[a("li",[t._v("특정 Entity에 속하지 않은 도메인 로직을 제공")]),t._v(" "),a("li",[t._v("도메인 로직이 여러 entity, value를 필요로 하는 경우 도메인 서비스에서 로직을 구현")])])])]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"엔티티와-밸류"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#엔티티와-밸류"}},[t._v("#")]),t._v(" 엔티티와 밸류")]),t._v(" "),a("h3",{attrs:{id:"도메인-모델의-엔티티"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#도메인-모델의-엔티티"}},[t._v("#")]),t._v(" 도메인 모델의 엔티티")]),t._v(" "),a("p",[t._v("데이터와 함께 도메인 기능을 제공한다는 점에서 단순히 데이터를 담는 기능의 DB 모델 엔티티와는 다름")]),t._v(" "),a("h3",{attrs:{id:"엔티티의-밸류"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#엔티티의-밸류"}},[t._v("#")]),t._v(" 엔티티의 밸류")]),t._v(" "),a("p",[t._v("밸류 객체는 불변으로 구현하는 것을 권장하므로, 엔티티의 밸류 타입 데이터 변경시에는 새로운 객체를 생성해 교체하는 방식을 지향해야 함")])])}),[],!1,null,null,null);s.default=r.exports}}]);