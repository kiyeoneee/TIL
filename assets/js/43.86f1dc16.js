(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{402:function(s,a,t){"use strict";t.r(a);var e=t(42),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_2-도커와-쿠버네티스-첫걸음"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-도커와-쿠버네티스-첫걸음"}},[s._v("#")]),s._v(" 2. 도커와 쿠버네티스 첫걸음")]),s._v(" "),t("h2",{attrs:{id:"_1-도커를-사용한-컨테이너-이미지-생성-실행-공유하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-도커를-사용한-컨테이너-이미지-생성-실행-공유하기"}},[s._v("#")]),s._v(" 1. 도커를 사용한 컨테이너 이미지 생성, 실행, 공유하기")]),s._v(" "),t("h3",{attrs:{id:"hello-world-컨테이너-실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hello-world-컨테이너-실행"}},[s._v("#")]),s._v(" Hello World 컨테이너 실행")]),s._v(" "),t("p",[s._v("busybox 이미지를 이용해 컨테이너에서 Hello world 실행")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ docker run busybox "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello world"')]),s._v("\nUnable to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'busybox:latest'")]),s._v(" locally\nlatest: Pulling from library/busybox\n4c892f00285e: Pull complete\nDigest: sha256:e1488cb900233d035575f0a7787448cb1fa93bed0ccc0d4efc1963d7d72a8f17\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" busybox:latest\nHello world\n")])])]),t("p",[s._v("도커를 이용해 서버에서 실행중인 다른 모든 프로세스로부터 완전히 격리된 컨테이너 내부에서 애플리케이션을 실행시킬 수 있다.")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"백그라운드에-일어난-동작-이해하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#백그라운드에-일어난-동작-이해하기"}},[s._v("#")]),s._v(" 백그라운드에 일어난 동작 이해하기")]),s._v(" "),t("ol",[t("li",[s._v("busybox 이미지가 로컬에 존재하는지 확인")]),s._v(" "),t("li",[s._v("존재하지 않는다면 도커 허브에서 이미지 다운로드")]),s._v(" "),t("li",[s._v("이미지로부터 컨테이너 생성")]),s._v(" "),t("li",[s._v("컨테이너 내부에서 명령어 실행")]),s._v(" "),t("li",[s._v("프로세스 중단 후 컨테이너 중지")])]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"컨테이너-이미지에-버전-지정하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-이미지에-버전-지정하기"}},[s._v("#")]),s._v(" 컨테이너 이미지에 버전 지정하기")]),s._v(" "),t("p",[s._v("tag의 default 값은 latest")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ docker run "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("br"),s._v(" "),t("h3",{attrs:{id:"컨테이너-이미지-생성"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-이미지-생성"}},[s._v("#")]),s._v(" 컨테이너 이미지 생성")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ docker build -t kubia "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),t("h4",{attrs:{id:"빌드-과정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#빌드-과정"}},[s._v("#")]),s._v(" 빌드 과정")]),s._v(" "),t("ol",[t("li",[s._v("현재 디렉터리의 컨텐츠 기반(마지막 "),t("code",[s._v(".")]),s._v(")으로 kubia라는 이름의 이미지 빌드 요청")]),s._v(" "),t("li",[s._v("Dockerfile의 지시 사항에 근거해 도커가 이미지 빌드")])]),s._v(" "),t("p",[s._v("디렉터리의 전체 콘텐츠가 도커 데몬에 업로드되고 그곳에서 이미지 빌드\n리눅스가 아닌 OS에서는 도커 클라이언트는 호스트 OS에 위치하고, 데몬은 가상머신 내부에서 실행")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"이미지-레이어에-관해-이해하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#이미지-레이어에-관해-이해하기"}},[s._v("#")]),s._v(" 이미지 레이어에 관해 이해하기")]),s._v(" "),t("p",[s._v("도커 이미지는 여러개의 레이어를 가지고 이를 공유할 수 있음 -> 이미지의 저장과 전송에 효과적\n도커는 로컬에 저장되지 않은 레이어만 다운로드\n기본 이미지의 모든 레이어를 가져옴 -> 이미지 위에 새로운 레이어를 생성 -> app.js 파일 추가")]),s._v(" "),t("p",[s._v("// todo  컨테이너 이미지 레이어 사진 추가")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"컨테이너-이미지-실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-이미지-실행"}},[s._v("#")]),s._v(" 컨테이너 이미지 실행")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ docker run --name kubia-container -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 -d kubia\n$ docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" // 실행중인 컨테이너 확인\n$ docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a // 모든 상태의 컨테이너 확인\n")])])]),t("p",[s._v("ps로 확인했을 때 정상적으로 이미지가 실행 안된 경우 "),t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/container_logs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("도커 명령어로 컨테이너 로그 확인"),t("OutboundLink")],1),s._v(" "),t("code",[s._v("$ docker container logs [OPTIONS] CONTAINER")])]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"실행-중인-컨테이너-내부-탐색하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#실행-중인-컨테이너-내부-탐색하기"}},[s._v("#")]),s._v(" 실행 중인 컨테이너 내부 탐색하기")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ docker inspect kubia-container  // 컨테이너 추가 정보를 json으로 확인\n$ docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it kubia-container "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("  // 컨테이너 내부에서 셸 실행\n$ docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it kubia-container "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\nroot@994de4fe0691:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("873548")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29332")]),s._v(" ?        Ssl  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":47   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 node app.js\nroot        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18188")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3120")]),s._v(" pts/0    Ss   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":56   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\nroot        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36636")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2720")]),s._v(" pts/0    R+   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":56   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" app.j\nusername         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("67985")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4258892")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v(" s004  R+    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":57AM   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto --exclude-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".bzr --exclude-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CVS --exclude-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".git --exclude-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".hg --exclude-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".svn app.j\n")])])]),t("p",[s._v("컨테이너 내부에서 확인한 app.js가 호스트 운영체제에서 실행중임을 확인 가능\n컨테이너는 자체 리눅스 PID 네임스페이스를 사용하여 분리된 프로세스 트리를 가지므로 PID는 다름")])])}),[],!1,null,null,null);a.default=r.exports}}]);