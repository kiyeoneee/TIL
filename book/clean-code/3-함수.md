# 3. 함수

## 목차

1. [작게 만들어라!](#작게-만들어라!)
2. [한 가지만 해라!](#한-가지만-해라!)
3. [함수 당 추상화 수준은 하나로!](#함수-당-추상화-수준은-하나로!)
4. [Switch 문](#Switch-문)
5. [서술적인 이름을 사용하라](#서술적인-이름을-사용하라)
6. [함수 인수](#함수-인수)

---

### 작게 만들어라!

작게의 기준은 무엇일까?

* 블록과 들여쓰기  
  if/else/switch 문 등에 들어가는 블록은 한 줄이며 indent는 2단을 넘어서면 안된다.  
  적절한 메서드명을 가지는 메서드를 호출하는 방식을 통해 이를 충족시킨다.

<br>

### 한 가지만 해라!

**함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.**

함수는 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.  
한 함수에서 섹션을 나눌 수 없다면 함수가 한 가지 작업을 한다고 할 수 있다.

<br>

### 함수 당 추상화 수준은 하나로!

함수 내에 추상화 수준이 섞이면 특정 표현이 근본 개념인지 세부사항인지 구분하기 어려워진다.  

* 위에서 아래로 코드 읽기: 내려가기 규칙  
  한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 오면 함수 추상화 수준이 한번에 한 단계씩 낮아진다. 코드는 위에서 아래로 이야기처럼 읽혀야 좋다.

<br>

### Switch 문

**Bad :**

```java
public Money calculatePay(Employee e) throws InvalidEmployeeType {
  switch (e.type) {
    case COMMISSIONED:
      return calculateCommissionedPay(e);
    case HOURLY:
      return calculateHourlyPay(e);
    case SALARIED:
      return calculateSalariedPay(e);
    default:
      throw new InvalidEmployeeType(e.type);
  }
}
```

Switch문의 문제점

1. 함수가 길어진다
2. '한 가지' 작업만 수행하지 않는다.
3. Single Response Principle를 위반한다.
4. Open Closed Principle을 위반한다.

Switch문은 다형적 객체를 생성하는 코드안에서만 사용하도록 해야 한다.

<br>

### 서술적인 이름을 사용하라

일관적이고 서술적인 이름을 사용하여 함수 이름만으로 해당 함수가 하는 일을 파악할 수 있도록 해야 한다.

<br>

### 함수 인수

테스트 코드 관점에서도 인자가 많을수록 테스트를 위한 유효한 인자를 만들어야 하는 문제가 생긴다.  
todo

* 많이 쓰는 단항 형식  
  todo

* 플래그 인수  
  플래그 인수 값에 따라 메서드가 다른 기능을 하게 된다는 의미이므로 플래그 인수는 지양해야 한다.

* 이항 함수  
  무시해도 되는 인자가 있는 순간 버그 확률이 늘어난다.  
  이항 함수가 적절한 경우는 **인수 2개가 한 값을 표현하는 두 요소인 경우**, **자연적인 순서가 있는 경우**이다.  
  같은 클래스인 2개의 인자를 받는 경우 순서를 헷갈릴 수 있으므로 지양해야 한다.

* 삼항 함수  
  순서, 주춤, 무시로 야기되는 문제는 두 배 이상으로 늘어난다.  
  인자의 의미가 명확한 경우가 아니면 지양한다.

* 인수 객체  
  결국 변수에 이름을 붙여야 하므로 개념을 표현하게 되는 것이다.  
  e.g.,   

  ```java
  Circle makeCircle(double x, double y, double radius);
  Circle makeCircle(Point center, double radius);
  ```

* 인수 목록  
  가변 인수 전부가 동등하게 취급될 경우 List 형 인수 하나로 취급할 수 있다.   
  e.g., ` public String format(String format, Object... args)`  

* 동사와 키워드  
  함수의 의도나 인수의 순서와 의도를 함수 이름에 담아야 한다.  
  함수 이름에 인자의 키워드를 추가하여 인자의 의미와 순서를 보장 해 준다.

<br>



