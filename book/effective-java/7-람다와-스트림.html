<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7장. 람다와 스트림 | Today kiyeoneee Learned</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="What kiyeoneee learned everyday">
    <link rel="preload" href="/TIL/assets/css/0.styles.25cf7e1a.css" as="style"><link rel="preload" href="/TIL/assets/js/app.14df79b1.js" as="script"><link rel="preload" href="/TIL/assets/js/2.dce8ba1c.js" as="script"><link rel="preload" href="/TIL/assets/js/38.06a44a05.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.4f5ca765.js"><link rel="prefetch" href="/TIL/assets/js/11.8c375806.js"><link rel="prefetch" href="/TIL/assets/js/12.b481e600.js"><link rel="prefetch" href="/TIL/assets/js/13.f20868f4.js"><link rel="prefetch" href="/TIL/assets/js/14.41e7de9c.js"><link rel="prefetch" href="/TIL/assets/js/15.0e8a7359.js"><link rel="prefetch" href="/TIL/assets/js/16.203af499.js"><link rel="prefetch" href="/TIL/assets/js/17.063a3e76.js"><link rel="prefetch" href="/TIL/assets/js/18.97a8642a.js"><link rel="prefetch" href="/TIL/assets/js/19.402f271c.js"><link rel="prefetch" href="/TIL/assets/js/20.7018a74a.js"><link rel="prefetch" href="/TIL/assets/js/21.374cbc95.js"><link rel="prefetch" href="/TIL/assets/js/22.b10e5b32.js"><link rel="prefetch" href="/TIL/assets/js/23.8c73a2d0.js"><link rel="prefetch" href="/TIL/assets/js/24.a6b3b327.js"><link rel="prefetch" href="/TIL/assets/js/25.67310368.js"><link rel="prefetch" href="/TIL/assets/js/26.0cc3dc23.js"><link rel="prefetch" href="/TIL/assets/js/27.37dbddf6.js"><link rel="prefetch" href="/TIL/assets/js/28.25bf1a71.js"><link rel="prefetch" href="/TIL/assets/js/29.5178dc1b.js"><link rel="prefetch" href="/TIL/assets/js/3.54a487f9.js"><link rel="prefetch" href="/TIL/assets/js/30.900f1a49.js"><link rel="prefetch" href="/TIL/assets/js/31.5acadd72.js"><link rel="prefetch" href="/TIL/assets/js/32.32847f7d.js"><link rel="prefetch" href="/TIL/assets/js/33.d04d65df.js"><link rel="prefetch" href="/TIL/assets/js/34.a72ae435.js"><link rel="prefetch" href="/TIL/assets/js/35.161fd7dc.js"><link rel="prefetch" href="/TIL/assets/js/36.754771e8.js"><link rel="prefetch" href="/TIL/assets/js/37.e070245d.js"><link rel="prefetch" href="/TIL/assets/js/39.275c570e.js"><link rel="prefetch" href="/TIL/assets/js/4.30442eb7.js"><link rel="prefetch" href="/TIL/assets/js/40.d597ea7b.js"><link rel="prefetch" href="/TIL/assets/js/41.245be6d0.js"><link rel="prefetch" href="/TIL/assets/js/42.12baffdd.js"><link rel="prefetch" href="/TIL/assets/js/43.86f1dc16.js"><link rel="prefetch" href="/TIL/assets/js/44.db7e6df7.js"><link rel="prefetch" href="/TIL/assets/js/45.203b2bc7.js"><link rel="prefetch" href="/TIL/assets/js/46.e9df3ac1.js"><link rel="prefetch" href="/TIL/assets/js/47.deadd21a.js"><link rel="prefetch" href="/TIL/assets/js/48.b70a2df0.js"><link rel="prefetch" href="/TIL/assets/js/49.1a4d181d.js"><link rel="prefetch" href="/TIL/assets/js/5.a34725ae.js"><link rel="prefetch" href="/TIL/assets/js/50.fa9d44cb.js"><link rel="prefetch" href="/TIL/assets/js/51.3202ad00.js"><link rel="prefetch" href="/TIL/assets/js/52.a6b1fe41.js"><link rel="prefetch" href="/TIL/assets/js/53.dd35c8d1.js"><link rel="prefetch" href="/TIL/assets/js/54.44b419f9.js"><link rel="prefetch" href="/TIL/assets/js/55.e2e2942a.js"><link rel="prefetch" href="/TIL/assets/js/56.fc1b4e3e.js"><link rel="prefetch" href="/TIL/assets/js/57.3aad11c0.js"><link rel="prefetch" href="/TIL/assets/js/58.fcd4daa5.js"><link rel="prefetch" href="/TIL/assets/js/59.d043979e.js"><link rel="prefetch" href="/TIL/assets/js/6.a0757fc0.js"><link rel="prefetch" href="/TIL/assets/js/60.58261ba7.js"><link rel="prefetch" href="/TIL/assets/js/61.3e59b22b.js"><link rel="prefetch" href="/TIL/assets/js/62.b1ac5ae1.js"><link rel="prefetch" href="/TIL/assets/js/63.01eebdae.js"><link rel="prefetch" href="/TIL/assets/js/64.5c3d4686.js"><link rel="prefetch" href="/TIL/assets/js/65.1c655cd7.js"><link rel="prefetch" href="/TIL/assets/js/7.112c04ff.js"><link rel="prefetch" href="/TIL/assets/js/8.130adf09.js"><link rel="prefetch" href="/TIL/assets/js/9.b12d813d.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.25cf7e1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today kiyeoneee Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/kiyeoneee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kyeoneee.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tech Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/kiyeoneee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kyeoneee.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tech Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Books</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/TIL/book/clean-code" class="sidebar-heading clickable open"><span>Clean Code</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/book/clean-code/2-의미있는-이름.html" class="sidebar-link">2장. 의미있는 이름</a></li><li><a href="/TIL/book/clean-code/3-함수.html" class="sidebar-link">3장. 함수</a></li><li><a href="/TIL/book/clean-code/4-주석.html" class="sidebar-link">4장. 주석</a></li><li><a href="/TIL/book/clean-code/5-형식-맞추기.html" class="sidebar-link">5장. 형식 맞추기</a></li><li><a href="/TIL/book/clean-code/6-객체와-자료-구조.html" class="sidebar-link">6장. 객체와 자료 구조</a></li><li><a href="/TIL/book/clean-code/7-오류-처리.html" class="sidebar-link">7장. 오류 처리</a></li><li><a href="/TIL/book/clean-code/8-경계.html" class="sidebar-link">8장. 경계</a></li><li><a href="/TIL/book/clean-code/9-단위테스트.html" class="sidebar-link">9장. 단위 테스트</a></li><li><a href="/TIL/book/clean-code/10-클래스.html" class="sidebar-link">10장. 클래스</a></li><li><a href="/TIL/book/clean-code/11-시스템.html" class="sidebar-link">11장. 시스템</a></li><li><a href="/TIL/book/clean-code/12-창발성.html" class="sidebar-link">12장. 창발성</a></li><li><a href="/TIL/book/clean-code/14-점진적-개선.html" class="sidebar-link">14장. 점진적 개선</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_7장-람다와-스트림"><a href="#_7장-람다와-스트림" class="header-anchor">#</a> 7장. 람다와 스트림</h1> <h2 id="목차"><a href="#목차" class="header-anchor">#</a> 목차</h2> <ul><li><a href="#Item-42-%EC%9D%B5%EB%AA%85-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%B3%B4%EB%8B%A4%EB%8A%94-%EB%9E%8C%EB%8B%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC">Item 42. 익명 클래스보다는 람다를 사용하라</a></li> <li><a href="#Item-43-%EB%9E%8C%EB%8B%A4%EB%B3%B4%EB%8B%A4%EB%8A%94-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B0%B8%EC%A1%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC">Item 43. 람다보다는 메서드 참조를 사용하라</a></li> <li><a href="#Item-44-%ED%91%9C%EC%A4%80-%ED%95%A8%EC%88%98%ED%98%95-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC">Item 44. 표준 함수형 인터페이스를 사용하라</a></li> <li><a href="#Item-45-%EC%8A%A4%ED%8A%B8%EB%A6%BC%EC%9D%80-%EC%A3%BC%EC%9D%98%ED%95%B4%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC">Item 45. 스트림은 주의해서 사용하라</a></li> <li><a href="#Item-46-%EC%8A%A4%ED%8A%B8%EB%A6%BC%EC%97%90%EC%84%9C%EB%8A%94-%EB%B6%80%EC%9E%91%EC%9A%A9-%EC%97%86%EB%8A%94-%ED%95%A8%EC%88%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC">Item 46. 스트림에서는 부작용 없는 함수를 사용하라</a></li> <li><a href="#Additional-Keyword">Additional Keyword</a></li></ul> <hr> <blockquote><p>Java 8에서 함수형 인터페이스, 람다, 메서드 참조라는 개념이 추가 됨
스트림 API도 추가되면서 데이터 원소의 시퀀스 처리를 라이브러리 차원에서 지원하기 시작</p></blockquote> <h2 id="item-42-익명-클래스보다는-람다를-사용하라"><a href="#item-42-익명-클래스보다는-람다를-사용하라" class="header-anchor">#</a> Item 42. 익명 클래스보다는 람다를 사용하라</h2> <p><strong>Bad : 익명 클래스</strong>
코드가 길어져 함수형 프로그래밍에 적합하지 않음</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Good : 함수형 인터페이스</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 람다식을 함수 객체로 사용</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 비교자 생성 메서드</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">length</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Java8 List 인터페이스에 추가된 sort 메서드</span>
words<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">length</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>열거 타입</strong>에서도 람다를 활용할 수 있음
상수별 클래스에 메서드를 두는 방법 대신 인스턴스 필드로 두어 코드를 개선할 수 있음
<strong>Bad : 상수별 클래스</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>
  <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Good : 람다를 인스턴트 필드로</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DoubleBinaryOperator</span> op<span class="token punctuation">;</span>
  
  <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">,</span> <span class="token class-name">DoubleBinaryOperator</span> op<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>op <span class="token operator">=</span> op<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DoubleBinaryOperator</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="정리"><a href="#정리" class="header-anchor">#</a> 정리</h3> <p>람다가 간결하긴 하지만 이름도 없고 문서화도 어려움
코드 자체로 동작이 명확하지 않거나 코드 줄 수가 4줄 이상이 되면 가독성이 떨어져 쓰지 않는 것이 좋음</p> <p><strong>람다로 대체가 불가한 경우?</strong></p> <ul><li>함수형 인터페이스에서만 쓰이기 때문에 추상 클래스의 인스턴스를 만들 때</li> <li>추상 메서드가 여러개인 인터페이스의 인스턴스를 생성할 때</li> <li>람다는 자신을 참조할 수 없기 때문에 this 키워드를 사용해 자신을 참조해야 할 때</li></ul> <p>즉, 함수형 인터페이스가 아닌 타입의 인스턴스를 만들 경우에는 익명 객체를 사용</p> <br> <h2 id="item-43-람다보다는-메서드-참조를-사용하라"><a href="#item-43-람다보다는-메서드-참조를-사용하라" class="header-anchor">#</a> Item 43. 람다보다는 메서드 참조를 사용하라</h2> <p>메서드 참조로 함수 객체를 람다보다도 간결하게 만들 수 있음</p> <p><strong>Bad : 람다 사용</strong>
단순한 기능임에도 매개변수의 표기 등으로 코드가 길어짐</p> <div class="language-java extra-class"><pre class="language-java"><code>map<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>count<span class="token punctuation">,</span> incr<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> count <span class="token operator">+</span> incr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Good : 메서드 참조</strong>
매개변수가 늘어날 수록 더 효과적</p> <div class="language-java extra-class"><pre class="language-java"><code>map<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="람다가-메서드-참조보다-더-좋은-경우"><a href="#람다가-메서드-참조보다-더-좋은-경우" class="header-anchor">#</a> 람다가 메서드 참조보다 더 좋은 경우?</h3> <ul><li><p>메서드와 람다가 같은 클래스에 있을 떄</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// GoshThisClassNameIsHumongous 클래스 내에서 같은 클래스의 메서드 참조 </span>
service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">GoshThisClassNameIsHumongous</span><span class="token operator">::</span><span class="token function">action</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 람다로 사용하면</span>
service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="메서드-참조-유형"><a href="#메서드-참조-유형" class="header-anchor">#</a> 메서드 참조 유형</h3> <ul><li>정적 메서드 참조
<code>Integer::parseInt</code></li> <li>수신 객체(Receiving object; 참조 대상 인스턴스)를 특정하는 <strong>한정적(bound) 인스턴스 메서드 참조</strong> <code>Instant.now()::isAfter</code> <ul><li>함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 똑같음</li></ul></li> <li>수신 객체를 특정하지 않는 <strong>비한정적(unbound) 인스턴스 메서드 참조</strong> <code>String::toLowerCase</code> <ul><li>함수 객체를 적용하는 시점에 수신 객체를 알려줘야 함
<ol><li>수신 객체 전달용 매개변수가 매개변수 목록의 첫번째로 추가</li> <li>그 뒤로 참조되는 메서드 선언에 정의된 매개변수들의 뒤따름</li></ol></li></ul></li> <li>클래스 생성자
<code>TreeMap&lt;K,V&gt;::new</code></li> <li>배열 생성자
<code>int[]::new</code></li></ul> <br> <h2 id="item-44-표준-함수형-인터페이스를-사용하라"><a href="#item-44-표준-함수형-인터페이스를-사용하라" class="header-anchor">#</a> Item 44. 표준 함수형 인터페이스를 사용하라</h2> <p>자바가 람다를 지원하면서 템플릿 메서드 패턴의 사용보다는 함수 객체를 받는 정적 팩터리나 생성자를 제공하는 것이 더 좋음
<strong>Bad : 메서드 정의 형식</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">removeEldestEntry</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> eldest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Good : 표준 함수형 인터페이스</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">EldestEntryRemovalFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Enty</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> eldest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="기본-함수형-인터페이스"><a href="#기본-함수형-인터페이스" class="header-anchor">#</a> 기본 함수형 인터페이스</h3> <p>아래의 기본 인터페이스에 Int, Long, Double 타입별로 타입명을 prefix 로 가지는 변형이 추가로 있음</p> <table><thead><tr><th>인터페이스</th> <th>함수 시그니처</th> <th>예</th></tr></thead> <tbody><tr><td>UnaryOperator<T></T></td> <td>T apply(T t)</td> <td>String::toLowerCase</td></tr> <tr><td>BinaryOperator<T></T></td> <td>T apply(T t1, T t2)</td> <td>BigInteger::add</td></tr> <tr><td>Predicate<T></T></td> <td>boolean test(T t)</td> <td>Collection::isEmpty</td></tr> <tr><td>Function&lt;T,R&gt;</td> <td>R apply(T t)</td> <td>Arrays::asList</td></tr> <tr><td>Supplier<T></T></td> <td>T get()</td> <td>Instant::now</td></tr> <tr><td>Consumer<T></T></td> <td>void accept(T t)</td> <td>System.out::println</td></tr></tbody></table> <p>대부분 기본 타입을 지원하는데, 이 때 박싱된 기본 타입을 넣어 사용하는 경우 성능에 문제가 발생할 수 있음</p> <h3 id="직접-작성하는-함수형-인터페이스"><a href="#직접-작성하는-함수형-인터페이스" class="header-anchor">#</a> 직접 작성하는 함수형 인터페이스</h3> <ul><li>표준 인터페이스 중 필요한 용도에 맞는게 없을 때 작성</li> <li>@FunctionalInterface 어노테이션을 꼭 붙여야 함
<ul><li>해당 클래스가 람다용으로 작성됨을 명시</li> <li>해당 인터페이스는 하나의 추상 메서드만 가져야 컴파일 됨</li> <li>유지보수 과정에서 실수로 메서드 추가를 방지</li></ul></li> <li>주의점
<ul><li>서로 다른 함수형 인터페이스를 같은 위치의 인수로 받는 메서드들을 다중 정의해서는 안 됨</li></ul></li></ul> <br> <h2 id="item-45-스트림은-주의해서-사용하라"><a href="#item-45-스트림은-주의해서-사용하라" class="header-anchor">#</a> Item 45. 스트림은 주의해서 사용하라</h2> <h3 id="stream-api의-추상-개념"><a href="#stream-api의-추상-개념" class="header-anchor">#</a> Stream API의 추상 개념</h3> <ul><li>Stream 이란 데이터 원소의 유한 혹은 무한 시퀀스를 뜻함</li> <li>Stream pipeline 은 원소들로 수행하는 연산 단계를 표현하는 개념
<ul><li>종단 연산 : 마지막 중간 연산이 내놓은 스트림에 최후의 연산을 가하는 역할
Lazy evaluation은 종단 연산이 호출될 때 이루어짐 -&gt; 종단 연산이 없으면 스트림 파이프라인은 아무 일도 하지 않는 것과 마찬가지</li></ul></li></ul> <h3 id="stream의-사용"><a href="#stream의-사용" class="header-anchor">#</a> Stream의 사용?</h3> <ul><li>코드 블록으로 사용이 용이한 경우
<ul><li>코드 블록 범위 안의 지역변수를 읽고 수정 할 때</li> <li>return, break, continue 문으로 블록 바깥의 반복문을 종료하거나 반복을 한 번 건너뛰어야 할 때
스트림이 사용하는 함수 객체는 이러한 행동이 불가능</li></ul></li> <li>Stream이 적합한 경우
<ul><li>원소들의 시퀀스를 일관되게 변환</li> <li>원소들의 시퀀스를 필터링</li> <li>원소들의 시퀀스를 하나의 연산을 사용해 결합</li> <li>원소들의 시퀀스를 컬렉션에 모음</li> <li>원소들의 시퀀스에서 특정 조건을 만족하는 원소를 찾음</li></ul></li></ul> <h3 id="어떻게-해야-잘-사용할-수-있을까"><a href="#어떻게-해야-잘-사용할-수-있을까" class="header-anchor">#</a> 어떻게 해야 잘 사용할 수 있을까?</h3> <ul><li>타입 이름을 자주 생략하므로 매개변수 이름을 잘 지어야 가독성이 유지됨</li> <li>연산의 세부 구현은 도우미 메서드로 적절히 추출해 활용할 것</li></ul> <br> <h2 id="item-46-스트림에서는-부작용-없는-함수를-사용하라"><a href="#item-46-스트림에서는-부작용-없는-함수를-사용하라" class="header-anchor">#</a> Item 46. 스트림에서는 부작용 없는 함수를 사용하라</h2> <p><strong>Bad: 스트림 내부에서 외부 상태를 수정</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> freq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  words<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>word <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    freq<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Good</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> freq<span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  freq <span class="token operator">=</span> words
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">,</span> <span class="token function">counting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>forEach 종단 연산은 스트림 계산 결과를 보고할 때만 사용하고 계산하는 데는 쓰지 말자</strong></p> <br> <hr> <h2 id="additional-keyword"><a href="#additional-keyword" class="header-anchor">#</a> Additional Keyword</h2> <h3 id="item-42"><a href="#item-42" class="header-anchor">#</a> Item 42</h3> <ul><li>전략 패턴</li></ul> <h3 id="item-43"><a href="#item-43" class="header-anchor">#</a> Item 43</h3> <ul><li>multiset</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.14df79b1.js" defer></script><script src="/TIL/assets/js/2.dce8ba1c.js" defer></script><script src="/TIL/assets/js/38.06a44a05.js" defer></script>
  </body>
</html>
