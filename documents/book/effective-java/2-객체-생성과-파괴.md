# 2장. 객체 생성과 파괴

## 목차

- [Item 1. 생성자 대신 정적 팩터리 메서드를 고려하라](#Item-1-생성자-대신-정적-팩터리-메서드를-고려하라)

---

## Item 1. 생성자 대신 정적 팩터리 메서드를 고려하라

### 정적 팩터리 메서드의 장점

* 이름을 통해 반환될 객체의 특성 묘사가 가능
* 호출될 때마다 새로운 인스턴스 생성 방지
  * 비용 절감 및 성능 향상 
  * 인스턴스 통제 클래스
* 반환 타입의 하위 타입 객체를 반환 가능
  * 인터페이스 클래스를 반환 타입으로 사용할 수 있어 인터페이스 기반 프레임워크를 만드는 핵심 기술이 됨
* 입력 매개 변수에 따라 반환 객체 변경 가능
* 반환할 객체의 구현체가 없어도 구현 가능
  * Service provider framework
    * provider : 서비스 구현체
    * 핵심 컴포넌트 (eg. JDBC)
      * Service Interface : 구현체의 동작 정의 (eg. Connection)
      * Provider Registration API : provider가 구현체를 등록할 때 사용 (eg. DriverManager.registerDriver)
      * Service Access API : Client가 서비스의 인터페이스를 얻을 때 사용 (eg. DriverManager.getConnection)
      * Service Provider Interface : Service Interface의 인스턴스를 생성하는 팩터리 객체를 설명 (eg. Driver)

### 정적 팩터리 메서드의 단점

* 정적 팩터리 메서드만 제공하면 하위 클래스를 만들 수 없음
* Client가 모든 정적 팩터리 메서드를 알기 어려움
  * 생성자처럼 API 문서에 명확히 드러나지 않음

### 정적 팩터리 메서드의 네이밍

* **from** : 하나의 매개변수를 받아 해당 타입의 인스턴스 반환, 형변환 메서드
* **of** : 여러개의 매개변수를 받아 적합한 타입의 인스턴스 반환, 집계 메서드
* **valueOf** : from, of의 더 자세한 버전
* **instance**, **getInstance** : 반환되는 인스턴스가 매번 같은 인스턴스임을 보장하지 않음
* **create**, **newInstance** : 매번 새로운 인스턴스 반환 보장
* **getType** : 다른 클래스의 팩터리 메서드를 정의할 때 사용하며 매번 같은 인스턴스를 반환하지는 않음
  * ` Files.getFileStore(path)` 와 같이 "type" 부분에 반환 할 타입명으로 구현
* **newType** : 다른 클래스의 팩터리 메서드를 정의할 때 사용하며 매번 새로운 인스턴스를 반환
* **type** : getType, newType의 간결한 버전

<br>



---

## Additional Keyword

### Item 1

* 플라이웨이트 패턴
* 인스턴스화 불가 -> **2장 - Item 4**
* 인터페이스 기반 프레임워크 -> **4장 - Item 20**
* Companion -> **4장 - Item 17**
* Java 8
  * 인터페이스도 정적 메서드를 가질 수 있음
  * public static 멤버까지 허용
* Java 9
  * private static method 허용
  * private static member 는 여전히 불허
* EnumSet 클래스 -> **6장 - Item 36**
* Bridge pattern
* 