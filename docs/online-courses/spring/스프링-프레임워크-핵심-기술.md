# 스프링 프레임워크 핵심기술

> **url** : https://www.inflearn.com/course/spring-framework_core/dashboard
> **강사** : 백기선
>
> 스프링을 잘 모르면서 사용하다보니 이대로는 안되겠다 하는 시점들이 자주 찾아온다ㅠㅠ
> 더는 미룰 수 없어서 수강하는 스프링 프레임워크 핵심기술!



# 0. 소개

#### 스프링이란?

* 소규모 애플리케이션 또는 기업용 애플리케이션을 자바로 개발하는데 있어 유용하고 편리한 기능을 제공하는 프레임워크

### 디자인 철학

* 모든 선택은 개발자의 몫
* 다양한 관점을 지향하여 유연성을 높임
* 하위 호환성을 지킴
* API를 신중하게 설계
* 높은 수준의 코드 지향

<br>

# 1. IoC 컨테이너와 빈

## 1부. 스프링 IoC 컨테이너와 빈

### IoC란?

> 의존 관계 주입 ( Inversion of Control )
> 한 클래스에서 사용할 의존 객체를 생성자를 사용해 직접 만들어서 사용하는 것이 아니라, 주입받아서 사용하는 방법



### IoC 컨테이너

* BeanFactory interface가 가장 핵심
* 어플리케이션 컴포넌트의 중앙 저장소
* 빈 설정 소스로 부터 빈 정의를 읽어들이고, 빈을 구성하고 제공



### Bean

* 스프링 IoC 컨테이너가 관리하는 객체

* 장점

  * 의존성 관리
  * 스코프
    * 싱글톤 : 하나만 만들어서
    * 프로토타입 : 매번 다른 객체
  * 라이프사이클 인터페이스

  

#### ApplicationContext

실질적으로 우리가 가장 많이 사용하게 될 BeanFactory
BeanFactory를 상속하여 기본적인 BeanFactory의 기능을 수행하면서 추가적인 기능들을 제공

* BeanFactory
* 메세지 소스 처리 기능 (i18n)
* 이벤트 발행 기능
* 리소스 로딩 기능
* ...

<br>

## 2부. ApplicationContext와 다양한 빈 설정 방법

### Bean을 정의하는 방법은 어노테이션 외에도 xml 파일로 가능

application.xml

```xml
<bean id="소문자 시작, camelCase" class="해당 클라스 package.ClassName">
  <property name="상속 받을 클래스 내부에 인스턴스 변수 명" ref="다른 bean id" />
</bean>
```

application.java

```java
public class Application {
  public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("application.xml");
    String[] beanDefinitionNames = context.getBeanDefinitionNames();
    System.out.println(Arrays.toString(beanDefinitionNames));
    BookService bookService = (BookService) context.getBean("bookService");
  }
}
```

이러한 방법은 매우 불편하다!

```xml
<context:component-scan base-package="스프링 컨테이너가 관리할 package"/>
```

근데 java로 컨피그 파일을 만들 수는 없을까?

```java
@Configuration
//@ComponentScan(basePackageClasses = Application.class)  
// 이 클래스가 위치한 곳부터 component 스캐닝을 해라
// ComponentScan 어노테이션을 달면 아래의 bean 정의는 모두 삭제해도 됨
public class ApplicationConfig {
    @Bean
    public BookRepository bookRepository() {
        return new BookRepository();
    }

    @Bean
    public BookService bookService(BookRepository bookRepository) {
        return new BookService(bookRepository);
    }
}

@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        ApplicationContext context = new AnnotationConfigApplicationContext(ApplicationConfig.class);
        String[] beanDefinitionNames = context.getBeanDefinitionNames();
        System.out.println(Arrays.toString(beanDefinitionNames));
        BookService bookService = (BookService) context.getBean("bookService");

        System.out.println(bookService.bookRepository != null);
    }
}

```

SpringBoot를 사용한다면 이러한 bean 정의를 모두 생략할 수 있다.

```java
// ComponentScan 어노테이션을 포함하는 SpringBootApplication 어노테이션이 모든 Bean 객체를 생성해줌!
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
    }
}
```



